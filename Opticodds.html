```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpticOdds Explorer - Complete</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            font-size: 13px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        /* MAIN TABS */
        .tabs-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 20px;
            display: flex;
            gap: 8px;
            backdrop-filter: blur(10px);
        }
        
        .tab-button {
            flex: 1;
            padding: 15px 30px;
            background: transparent;
            color: white;
            border: 2px solid transparent;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .tab-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab-button.active {
            background: white;
            color: #1e3c72;
            border-color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }

        /* SUB-TABS (dentro de Advanced) */
        .sub-tabs-container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 8px;
            margin-bottom: 20px;
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .sub-tab-button {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .sub-tab-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .sub-tab-button.active {
            background: #1e3c72;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .sub-tab-content {
            display: none;
        }

        .sub-tab-content.active {
            display: block;
        }
        
        .breadcrumb {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .breadcrumb span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .breadcrumb .separator {
            opacity: 0.6;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px;
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        .panel h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #1e3c72;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }
        
        .panel-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-actions {
            display: flex;
            gap: 8px;
        }
        
        .counter-badge {
            background: #1e3c72;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 400;
        }
        
        .copy-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }
        
        .copy-btn:active {
            transform: scale(0.95);
        }
        
        .logo-container {
            width: 22px;
            height: 22px;
            display: inline-block;
            margin-right: 6px;
            vertical-align: middle;
            border-radius: 3px;
            overflow: hidden;
            background: #f0f0f0;
            flex-shrink: 0;
        }
        
        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .item-content {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .panel-content {
            flex: 1;
            overflow-y: auto;
            max-height: 500px;
            min-height: 300px;
        }
        
        .panel-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .panel-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .panel-content::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .panel-content::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .item {
            padding: 8px 10px;
            margin-bottom: 6px;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .item.active {
            background: #1e3c72;
            color: white;
            border-color: #2a5298;
        }
        
        .item-title {
            font-weight: 400;
            font-size: 13px;
        }
        
        .item-subtitle {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 2px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 8px;
            margin: 20px;
            border: 1px solid #f5c6cb;
        }
        
        .empty {
            text-align: center;
            padding: 30px;
            color: #999;
            font-style: italic;
        }
        
        .badge {
            background: #1e3c72;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            margin-right: 4px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #dc3545;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            line-height: 1;
        }
        
        .modal-close:hover {
            background: #c82333;
        }
        
        .modal-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            overflow: hidden;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .modal-player-name {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 5px;
        }
        
        .modal-player-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .info-label {
            font-weight: 600;
            color: #1e3c72;
        }
        
        .info-value {
            color: #333;
        }

        /* ADVANCED TAB STYLES */
        .filters-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-weight: 600;
            color: #1e3c72;
            font-size: 12px;
            text-transform: uppercase;
        }

        .filter-group input,
        .filter-group select,
        .filter-group textarea {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 13px;
            transition: all 0.2s;
        }

        .filter-group input:focus,
        .filter-group select:focus,
        .filter-group textarea:focus {
            outline: none;
            border-color: #1e3c72;
        }

        .btn-primary {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            background: #2a5298;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .fixture-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
            cursor: pointer;
        }

        .fixture-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .fixture-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .fixture-teams {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .team {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .team-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .team-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .team-name {
            font-weight: 600;
            color: #1e3c72;
            font-size: 14px;
        }

        .vs-separator {
            font-weight: bold;
            color: #999;
            font-size: 12px;
        }

        .fixture-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }

        .fixture-date {
            font-size: 12px;
            color: #666;
        }

        .fixture-status {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-unplayed {
            background: #fff3cd;
            color: #856404;
        }

        .status-live {
            background: #d4edda;
            color: #155724;
            animation: pulse 2s infinite;
        }

        .status-completed, .status-complete {
            background: #e2e3e5;
            color: #383d41;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .fixture-info {
            display: flex;
            gap: 20px;
            font-size: 12px;
            color: #666;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .fixture-info-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .odds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }

        .odds-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 2px solid #e9ecef;
            transition: all 0.2s;
        }

        .odds-card:hover {
            border-color: #1e3c72;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .odds-sportsbook {
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .odds-market {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .odds-selection {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 5px;
        }

        .odds-selection-name {
            font-weight: 600;
            font-size: 13px;
        }

        .odds-price {
            background: #28a745;
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 13px;
        }

        .odds-price.negative {
            background: #dc3545;
        }

        .sportsbook-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .sportsbook-chip {
            padding: 8px 16px;
            border: 2px solid #e9ecef;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .sportsbook-chip:hover {
            border-color: #1e3c72;
        }

        .sportsbook-chip.active {
            background: #1e3c72;
            color: white;
            border-color: #1e3c72;
        }

        .back-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.2s;
        }

        .back-button:hover {
            background: #5a6268;
        }

        /* Results Styles */
        .result-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .result-score {
            font-size: 24px;
            font-weight: bold;
            color: #1e3c72;
            text-align: center;
            margin: 15px 0;
        }

        .score-team {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .score-team.winner {
            background: #d4edda;
            border: 2px solid #28a745;
        }

        /* Grader Styles */
        .grader-result {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            border: 3px solid #e9ecef;
        }

        .grader-result.win {
            border-color: #28a745;
            background: #f0fff4;
        }

        .grader-result.loss {
            border-color: #dc3545;
            background: #fff5f5;
        }

        .grader-result.push {
            border-color: #ffc107;
            background: #fffbf0;
        }

        .result-badge {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .result-badge.win {
            background: #28a745;
            color: white;
        }

        .result-badge.loss {
            background: #dc3545;
            color: white;
        }

        .result-badge.push {
            background: #ffc107;
            color: #333;
        }

        /* Futures Styles */
        .futures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .future-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .future-title {
            font-size: 16px;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 15px;
        }

        .future-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .future-option:hover {
            background: #e9ecef;
        }

        .future-option.best {
            border: 2px solid #28a745;
            background: #f0fff4;
        }

        /* Parlay Builder Styles */
        .parlay-selections {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .selection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 10px;
            border: 2px solid transparent;
        }

        .selection-item:hover {
            border-color: #1e3c72;
        }

        .parlay-calculator {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            border: 3px solid #1e3c72;
        }

        .parlay-odds-display {
            font-size: 32px;
            font-weight: 700;
            color: #1e3c72;
            text-align: center;
            margin: 20px 0;
        }

        .payout-calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .calc-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .calc-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .calc-value {
            font-size: 24px;
            font-weight: 700;
            color: #1e3c72;
        }

        /* Live Stream Styles */
        .live-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .live-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #d4edda;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .live-indicator {
            width: 12px;
            height: 12px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .odds-update {
            padding: 10px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            margin-bottom: 10px;
            border-radius: 4px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .odds-change-up {
            color: #28a745;
            font-weight: 700;
        }

        .odds-change-down {
            color: #dc3545;
            font-weight: 700;
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .flex {
            display: flex;
        }

        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gap-10 {
            gap: 10px;
        }

        .success-text {
            color: #28a745;
            font-weight: 600;
        }

        .error-text {
            color: #dc3545;
            font-weight: 600;
        }

        .fixture-odds-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .fixture-odds-loading {
            text-align: center;
            color: #666;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° OpticOdds Explorer</h1>
            <p>Complete Sports Betting Data Platform</p>
        </div>

        <!-- MAIN TABS -->
        <div class="tabs-container">
            <button class="tab-button active" onclick="switchMainTab('base')">
                üìä BASE
            </button>
            <button class="tab-button" onclick="switchMainTab('advanced')">
                üöÄ ADVANCED
            </button>
        </div>

        <!-- BASE TAB CONTENT -->
        <div id="base-tab" class="tab-content active">
            <div class="breadcrumb" id="breadcrumb">
                <span>üè† Home</span>
            </div>

            <div class="grid" id="mainGrid">
                <div class="loading">Loading sports data</div>
            </div>
        </div>

        <!-- ADVANCED TAB CONTENT -->
        <div id="advanced-tab" class="tab-content">
            
            <!-- SUB-TABS -->
            <div class="sub-tabs-container">
                <button class="sub-tab-button active" onclick="switchAdvancedSection('fixtures')">
                    üéØ Fixtures & Odds
                </button>
                <button class="sub-tab-button" onclick="switchAdvancedSection('results')">
                    üìä Results & Grader
                </button>
                <button class="sub-tab-button" onclick="switchAdvancedSection('futures')">
                    üîÆ Futures & Outrights
                </button>
                <button class="sub-tab-button" onclick="switchAdvancedSection('parlay')">
                    üé≤ Parlay Builder
                </button>
                <button class="sub-tab-button" onclick="switchAdvancedSection('stream')">
                    üî¥ Live Stream
                </button>
                <button class="sub-tab-button" onclick="switchAdvancedSection('market-types')">
                    üìà Market Types
                </button>
            </div>

            <!-- FIXTURES & ODDS SECTION -->
            <div id="adv-fixtures" class="sub-tab-content active">
                <div class="filters-panel">
                    <h2 style="margin-bottom: 20px; color: #1e3c72;">üîç Search Fixtures</h2>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Sport *</label>
                            <select id="adv-sport">
                                <option value="">Select Sport</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>League *</label>
                            <select id="adv-league">
                                <option value="">Select League</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Sportsbook (for Odds)</label>
                            <select id="adv-sportsbook">
                                <option value="">Select Sportsbook</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Market (for Odds)</label>
                            <input type="text" id="adv-market" placeholder="e.g. moneyline">
                        </div>
                        <div class="filter-group">
                            <label>Start Date After (Optional)</label>
                            <input type="datetime-local" id="adv-date-after">
                        </div>
                        <div class="filter-group">
                            <label>Start Date Before (Optional)</label>
                            <input type="datetime-local" id="adv-date-before">
                        </div>
                    </div>
                    <button class="btn-primary" onclick="searchFixtures()">
                        üîé Search Fixtures with Odds
                    </button>
                </div>

                <div id="fixtures-container">
                    <div class="empty">Select sport, league, and optional sportsbook/market, then click Search to view fixtures with integrated odds</div>
                </div>

                <div id="odds-container" style="display: none;">
                    <button class="back-button" onclick="backToFixtures()">‚Üê Back to Fixtures</button>
                    <div id="odds-content"></div>
                </div>
            </div>

            <!-- RESULTS & GRADER SECTION -->
            <div id="adv-results" class="sub-tab-content">
                <div class="filters-panel">
                    <h2 style="margin-bottom: 20px; color: #1e3c72;">üìä Search Results & Grade Bets</h2>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Sport *</label>
                            <select id="results-sport">
                                <option value="">Select Sport</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>League *</label>
                            <select id="results-league">
                                <option value="">Select League</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn-primary" onclick="searchCompletedFixtures()">
                        üîé Search Completed Fixtures
                    </button>
                </div>

                <div id="results-fixtures-container">
                    <div class="empty">Select sport and league to view completed fixtures</div>
                </div>

                <!-- Grader Section -->
                <div id="grader-section" style="display: none;">
                    <button class="back-button" onclick="backToResults()">‚Üê Back to Results</button>
                    
                    <div class="filters-panel">
                        <h2 style="margin-bottom: 20px; color: #1e3c72;">üéØ Grade Your Bet</h2>
                        
                        <div class="filters-grid">
                            <div class="filter-group">
                                <label>Market *</label>
                                <input type="text" id="grader-market" placeholder="e.g. moneyline, player_points_over">
                            </div>
                            <div class="filter-group">
                                <label>Selection / Name *</label>
                                <input type="text" id="grader-name" placeholder="e.g. Lakers, LeBron James Over 25.5">
                            </div>
                            <div class="filter-group">
                                <label>Player ID (Optional)</label>
                                <input type="text" id="grader-player-id" placeholder="Only for player props">
                            </div>
                        </div>

                        <button class="btn-primary" onclick="gradeBet()">
                            Grade Bet
                        </button>
                    </div>

                    <div id="grader-result-container" class="mt-20">
                        <div class="empty">Enter bet details and click "Grade Bet"</div>
                    </div>
                </div>
            </div>

            <!-- FUTURES SECTION -->
            <div id="adv-futures" class="sub-tab-content">
                <div class="filters-panel">
                    <h2 style="margin-bottom: 20px; color: #1e3c72;">Futures & Outrights</h2>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Sport *</label>
                            <select id="futures-sport">
                                <option value="">Select Sport</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>League *</label>
                            <select id="futures-league">
                                <option value="">Select League</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn-primary" onclick="searchFutures()">
                        Search Futures
                    </button>
                </div>

                <div id="futures-container">
                    <div class="empty">Select sport and league to view futures markets</div>
                </div>
            </div>

            <!-- PARLAY BUILDER -->
            <div id="adv-parlay" class="sub-tab-content">
                <div class="parlay-selections" id="parlay-selections">
                    <div class="empty">Add selections from Fixtures & Odds</div>
                </div>

                <div id="parlay-calculator-section" style="display: none;">
                    <div class="filters-panel">
                        <h3>Select Sportsbooks</h3>
                        <div class="sportsbook-filter" id="parlay-sportsbooks-select">
                            <!-- Filled by JS -->
                        </div>
                        <div style="margin-top: 15px; display: flex; gap: 10px;">
                            <button class="btn-primary" onclick="calculateParlay()">Calculate Parlay</button>
                            <button class="btn-secondary" onclick="clearParlay()">Clear All</button>
                        </div>
                    </div>

                    <div id="parlay-results-container" class="mt-20">
                        <!-- Results here -->
                    </div>
                </div>
            </div>

            <!-- LIVE STREAM -->
            <div id="adv-stream" class="sub-tab-content">
                <div class="filters-panel">
                    <h2 style="margin-bottom: 20px; color: #1e3c72;">Live Odds Stream</h2>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Sport</label>
                            <select id="stream-sport">
                                <option value="">Select Sport</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn-primary" onclick="startStream()">Start Stream</button>
                    <button class="btn-secondary" onclick="stopStream()">Stop Stream</button>
                </div>

                <div class="live-container">
                    <div class="live-status" id="stream-status" style="display: none;">
                        <div class="live-indicator"></div>
                        <div>Live stream active - receiving updates...</div>
                    </div>
                    <div id="stream-container">
                        <div class="empty">Click "Start Stream" to begin</div>
                    </div>
                </div>
            </div>

            <!-- MARKET TYPES SECTION -->
            <div id="adv-market-types" class="sub-tab-content">
                <div class="filters-panel">
                    <h2 style="margin-bottom: 20px; color: #1e3c72;">üìà Market Types</h2>
                    <button class="btn-primary" onclick="loadMarketTypes()">
                        Load Market Types
                    </button>
                </div>

                <div id="market-types-container">
                    <div class="empty">Click "Load Market Types" to view the data</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="playerModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div class="modal-logo">
                <img id="modal-player-logo" src="" alt="">
            </div>
            <div class="modal-player-name" id="modal-player-name"></div>
            <div class="modal-player-subtitle" id="modal-player-subtitle"></div>
            <div id="modal-player-info"></div>
        </div>
    </div>

    <script>
        // === UTILS ===
        const API_BASE = 'https://opticodds-backend.onrender.com'; // Updated to Render URL

        async function fetchAPI(endpoint) {
            try {
                const res = await fetch(`${API_BASE}${endpoint}`);
                if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                return await res.json();
            } catch (error) {
                console.error('Fetch error:', error);
                throw error;
            }
        }

        async function postAPI(endpoint, body) {
            try {
                const res = await fetch(`${API_BASE}${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(body)
                });
                if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                return await res.json();
            } catch (error) {
                console.error('Post error:', error);
                throw error;
            }
        }

        function extractData(data) {
            return data?.data || data || [];
        }

        function formatDate(isoDate) {
            if (!isoDate) return 'N/A';
            const date = new Date(isoDate);
            return date.toLocaleString('en-US', {
                weekday: 'short',
                month: 'short',
                day: 'numeric',
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
            });
        }

        // === STATE ===
        const advancedState = {
            sports: [],
            leagues: {},
            markets: {},
            teams: {},
            players: {},
            activeSportsbooks: [],
            currentSection: 'fixtures',
            activeFixtures: [],
            completedFixtures: [],
            currentFixture: null,
            currentFixtureData: null,
            currentFixtureSport: '',
            currentFixtureLeague: '',
            futuresData: [],
            parlaySelections: [],
            selectedParlaySportsbooks: [],
            streamActive: false,
            streamConnection: null
        };

        // === TABS ===
        function switchMainTab(tab) {
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector(`[onclick="switchMainTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}-tab`).classList.add('active');
        }

        function switchAdvancedSection(section) {
            document.querySelectorAll('.sub-tab-button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.sub-tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector(`[onclick="switchAdvancedSection('${section}')"]`).classList.add('active');
            document.getElementById(`adv-${section}`).classList.add('active');
            advancedState.currentSection = section;

            if (section === 'parlay') loadParlaySection();
            if (section === 'futures') populateFuturesFilters();
            if (section === 'stream') populateStreamFilters();
            if (section === 'fixtures') populateFixturesFilters();
            if (section === 'results') populateResultsFilters();
            if (section === 'market-types') loadMarketTypes();
        }

        // === INITIAL LOAD ===
        async function init() {
            await loadBaseSports();
            populateFixturesFilters();
            populateResultsFilters();
            populateFuturesFilters();
            populateStreamFilters();
        }

        // === BASE TAB ===
        async function loadBaseSports() {
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = '<div class="loading">Loading sports data</div>';
            try {
                const data = await fetchAPI('/api/v3/sports/active');
                advancedState.sports = extractData(data);
                renderBaseSports();
            } catch (error) {
                grid.innerHTML = `<div class="error">Error loading sports: ${error.message}</div>`;
            }
        }

        function renderBaseSports() {
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = `
                <div class="panel">
                    <h2>Active Sports <span class="counter-badge">${advancedState.sports.length}</span></h2>
                    <div class="panel-content">
                        ${advancedState.sports.map(sport => {
                            const name = sport.title || sport.name;
                            const key = sport.key || sport.id;
                            return `<div class="item" onclick="loadLeagues('${key}')">${name}</div>`;
                        }).join('')}
                    </div>
                </div>
                <!-- Otros paneles para leagues, markets, etc. -->
            `;
        }

        async function loadLeagues(sportKey) {
            // Placeholder for loading leagues in base tab
            console.log('Loading leagues for sport:', sportKey);
        }

        // === FIXTURES ===
        function populateFixturesFilters() {
            const sportSelect = document.getElementById('adv-sport');
            const leagueSelect = document.getElementById('adv-league');
            const sportsbookSelect = document.getElementById('adv-sportsbook');

            sportSelect.innerHTML = '<option value="">Select Sport</option>' + 
                advancedState.sports.map(sport => {
                    const name = sport.title || sport.name;
                    const key = sport.key || sport.id;
                    return `<option value="${key}">${name}</option>`;
                }).join('');

            sportSelect.addEventListener('change', async () => {
                const sportKey = sportSelect.value;
                if (!sportKey) return;
                leagueSelect.innerHTML = '<option value="">Loading...</option>';
                try {
                    const data = await fetchAPI(`/api/v3/leagues?sport=${sportKey}`);
                    const leagues = extractData(data);
                    leagueSelect.innerHTML = '<option value="">Select League</option>' + 
                        leagues.map(league => {
                            const name = league.title || league.name;
                            const key = league.key || league.id;
                            return `<option value="${key}">${name}</option>`;
                        }).join('');
                } catch (error) {
                    leagueSelect.innerHTML = '<option value="">Error loading leagues</option>';
                }
                // Reset sportsbooks when sport changes
                sportsbookSelect.innerHTML = '<option value="">Select Sportsbook</option>';
            });

            leagueSelect.addEventListener('change', async () => {
                const sport = sportSelect.value;
                const league = leagueSelect.value;
                if (!sport || !league) return;
                sportsbookSelect.innerHTML = '<option value="">Loading...</option>';
                try {
                    const data = await fetchAPI(`/api/v3/sportsbooks/active?sport=${sport}&league=${league}`);
                    const sportsbooks = extractData(data);
                    advancedState.activeSportsbooks = sportsbooks;
                    sportsbookSelect.innerHTML = '<option value="">Select Sportsbook</option>' + 
                        sportsbooks.map(sb => {
                            const name = sb.title || sb.name;
                            const key = sb.key || sb.id;
                            return `<option value="${key}">${name}</option>`;
                        }).join('');
                } catch (error) {
                    sportsbookSelect.innerHTML = '<option value="">Error loading sportsbooks</option>';
                }
            });
        }

        async function searchFixtures() {
            const sport = document.getElementById('adv-sport').value;
            const league = document.getElementById('adv-league').value;
            const sportsbook = document.getElementById('adv-sportsbook').value;
            const market = document.getElementById('adv-market').value || 'moneyline'; // Default to moneyline if empty
            const startAfter = document.getElementById('adv-date-after').value;
            const startBefore = document.getElementById('adv-date-before').value;

            if (!sport || !league) {
                alert('Please select sport and league');
                return;
            }

            const container = document.getElementById('fixtures-container');
            container.innerHTML = '<div class="loading">Loading fixtures...</div>';

            try {
                let endpoint = `/api/v3/fixtures/active?sport=${sport}&league=${league}`;
                if (startAfter) endpoint += `&start_date_after=${startAfter}`;
                if (startBefore) endpoint += `&start_date_before=${startBefore}`;

                const data = await fetchAPI(endpoint);
                advancedState.activeFixtures = extractData(data);

                // Para cada fixture, fetch odds si sportsbook y market est√°n seleccionados
                if (sportsbook && market) {
                    for (let fixture of advancedState.activeFixtures) {
                        try {
                            const oddsEndpoint = `/api/v3/fixtures/odds?fixture_id=${fixture.id}&sportsbook=${sportsbook}&market=${market}`;
                            const oddsData = await fetchAPI(oddsEndpoint);
                            fixture.odds = extractData(oddsData);
                        } catch (err) {
                            fixture.odds = [];
                        }
                    }
                } else {
                    advancedState.activeFixtures.forEach(f => f.odds = []);
                }

                renderFixtures();
            } catch (error) {
                container.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            }
        }

        function renderFixtures() {
            const container = document.getElementById('fixtures-container');
            if (!advancedState.activeFixtures.length) {
                container.innerHTML = '<div class="empty">No active fixtures found</div>';
                return;
            }

            container.innerHTML = advancedState.activeFixtures.map(fixture => {
                const home = fixture.home_competitors?.[0] || { name: 'Home' };
                const away = fixture.away_competitors?.[0] || { name: 'Away' };
                const startDate = formatDate(fixture.start_date);
                const oddsHtml = fixture.odds.length > 0 ? 
                    fixture.odds.map(odd => {
                        const selections = odd.selections || [];
                        return `
                            <div class="odds-market">${odd.market}</div>
                            ${selections.map(sel => `
                                <div class="odds-selection">
                                    <span class="odds-selection-name">${sel.name}</span>
                                    <span class="odds-price ${sel.price < 0 ? 'negative' : ''}">${sel.price > 0 ? '+' : ''}${sel.price}</span>
                                </div>
                            `).join('')}
                        `;
                    }).join('') : '<div class="fixture-odds-loading">No odds available or select sportsbook/market</div>';

                return `
                    <div class="fixture-card">
                        <div class="fixture-header">
                            <div class="fixture-teams">
                                <div class="team">
                                    ${home.logo ? `<div class="team-logo"><img src="${home.logo}" alt="${home.name}"></div>` : ''}
                                    <span class="team-name">${home.name}</span>
                                </div>
                                <span class="vs-separator">vs</span>
                                <div class="team">
                                    ${away.logo ? `<div class="team-logo"><img src="${away.logo}" alt="${away.name}"></div>` : ''}
                                    <span class="team-name">${away.name}</span>
                                </div>
                            </div>
                            <div class="fixture-meta">
                                <div class="fixture-date">${startDate}</div>
                                <div class="fixture-status status-${fixture.status.toLowerCase()}">${fixture.status}</div>
                            </div>
                        </div>
                        <div class="fixture-info">
                            <div class="fixture-info-item">üìÖ ${startDate}</div>
                            <div class="fixture-info-item">üèÜ ${fixture.league?.name || 'N/A'}</div>
                            <div class="fixture-info-item">üìç ${fixture.location || 'N/A'}</div>
                        </div>
                        <div class="fixture-odds-section">
                            <h3 style="font-size: 14px; margin-bottom: 10px;">Odds</h3>
                            ${oddsHtml}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // === RESULTS & GRADER ===
        function populateResultsFilters() {
            const sportSelect = document.getElementById('results-sport');
            const leagueSelect = document.getElementById('results-league');

            sportSelect.innerHTML = '<option value="">Select Sport</option>' + 
                advancedState.sports.map(sport => {
                    const name = sport.title || sport.name;
                    const key = sport.key || sport.id;
                    return `<option value="${key}">${name}</option>`;
                }).join('');

            sportSelect.addEventListener('change', async () => {
                const sportKey = sportSelect.value;
                if (!sportKey) return;
                leagueSelect.innerHTML = '<option value="">Loading...</option>';
                try {
                    const data = await fetchAPI(`/api/v3/leagues?sport=${sportKey}`);
                    const leagues = extractData(data);
                    leagueSelect.innerHTML = '<option value="">Select League</option>' + 
                        leagues.map(league => {
                            const name = league.title || league.name;
                            const key = league.key || league.id;
                            return `<option value="${key}">${name}</option>`;
                        }).join('');
                } catch (error) {
                    leagueSelect.innerHTML = '<option value="">Error loading leagues</option>';
                }
            });
        }

        async function searchCompletedFixtures() {
            const sport = document.getElementById('results-sport').value;
            const league = document.getElementById('results-league').value;

            if (!sport || !league) {
                alert('Please select sport and league');
                return;
            }

            const container = document.getElementById('results-fixtures-container');
            container.innerHTML = '<div class="loading">Loading completed fixtures</div>';

            try {
                const endpoint = `/api/v3/fixtures?sport=${sport}&league=${league}`;
                const data = await fetchAPI(endpoint);
                let fixtures = extractData(data);
                advancedState.completedFixtures = fixtures.filter(f => f.status === 'complete' || f.status === 'completed');
                advancedState.completedFixtures.sort((a, b) => new Date(b.start_date) - new Date(a.start_date));
                renderCompletedFixtures();
            } catch (error) {
                container.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            }
        }

        function renderCompletedFixtures() {
            const container = document.getElementById('results-fixtures-container');
            if (!advancedState.completedFixtures.length) {
                container.innerHTML = '<div class="empty">No completed fixtures</div>';
                return;
            }

            container.innerHTML = advancedState.completedFixtures.map(fixture => {
                const home = fixture.home_competitors?.[0] || { name: 'Home' };
                const away = fixture.away_competitors?.[0] || { name: 'Away' };
                const result = fixture.result || {};
                const homeScore = result.home_score || 0;
                const awayScore = result.away_score || 0;
                const startDate = formatDate(fixture.start_date);

                return `
                    <div class="result-card">
                        <div class="fixture-header">
                            <div class="fixture-teams">
                                <div class="team">
                                    ${home.logo ? `<div class="team-logo"><img src="${home.logo}" alt=""></div>` : ''}
                                    <span class="team-name">${home.name}</span>
                                </div>
                                <div class="result-score">${homeScore} - ${awayScore}</div>
                                <div class="team">
                                    ${away.logo ? `<div class="team-logo"><img src="${away.logo}" alt=""></div>` : ''}
                                    <span class="team-name">${away.name}</span>
                                </div>
                            </div>
                        </div>
                        <div class="fixture-info">
                            <div class="fixture-info-item">üìÖ ${startDate}</div>
                            <div class="fixture-info-item">üèÜ ${fixture.league?.name || 'N/A'}</div>
                        </div>
                        <button class="btn-primary" style="margin-top: 15px; width: 100%;" onclick="openGrader('${fixture.id}', '${fixture.sport}', '${fixture.league}')">
                            Grade Bet
                        </button>
                    </div>
                `;
            }).join('');
        }

        function openGrader(fixtureId, sport, league) {
            advancedState.currentFixture = fixtureId;
            advancedState.currentFixtureSport = sport;
            advancedState.currentFixtureLeague = league;
            document.getElementById('results-fixtures-container').style.display = 'none';
            document.getElementById('grader-section').style.display = 'block';
        }

        async function gradeBet() {
            const market = document.getElementById('grader-market').value;
            const name = document.getElementById('grader-name').value;
            const playerId = document.getElementById('grader-player-id').value;

            if (!market || !name) {
                alert('Please enter market and selection');
                return;
            }

            const container = document.getElementById('grader-result-container');
            container.innerHTML = '<div class="loading">Grading...</div>';

            try {
                let endpoint = `/api/v3/grader/odds?sport=${advancedState.currentFixtureSport}&league=${advancedState.currentFixtureLeague}&fixture_id=${advancedState.currentFixture}&market=${encodeURIComponent(market)}&name=${encodeURIComponent(name)}`;
                if (playerId) endpoint += `&player_id=${playerId}`;
                const data = await fetchAPI(endpoint);
                const grade = extractData(data)[0] || {};
                renderGradeResult(grade);
            } catch (error) {
                container.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            }
        }

        function renderGradeResult(grade) {
            const container = document.getElementById('grader-result-container');
            const result = grade.result?.toLowerCase() || 'unknown';
            container.innerHTML = `
                <div class="grader-result ${result}">
                    <div class="result-badge ${result}">${result.toUpperCase()}</div>
                    <div class="info-row"><span class="info-label">Market:</span><span>${grade.market || 'N/A'}</span></div>
                    <div class="info-row"><span class="info-label">Selection:</span><span>${grade.name || 'N/A'}</span></div>
                    <div class="info-row"><span class="info-label">Result:</span><span>${grade.result || 'N/A'}</span></div>
                </div>
            `;
        }

        function backToResults() {
            document.getElementById('results-fixtures-container').style.display = 'block';
            document.getElementById('grader-section').style.display = 'none';
        }

        // === FUTURES ===
        function populateFuturesFilters() {
            const sportSelect = document.getElementById('futures-sport');
            const leagueSelect = document.getElementById('futures-league');

            sportSelect.innerHTML = '<option value="">Select Sport</option>' + 
                advancedState.sports.map(sport => {
                    const name = sport.title || sport.name;
                    const key = sport.key || sport.id;
                    return `<option value="${key}">${name}</option>`;
                }).join('');

            sportSelect.addEventListener('change', async () => {
                const sportKey = sportSelect.value;
                if (!sportKey) return;
                leagueSelect.innerHTML = '<option value="">Loading...</option>';
                try {
                    const data = await fetchAPI(`/api/v3/leagues?sport=${sportKey}`);
                    const leagues = extractData(data);
                    leagueSelect.innerHTML = '<option value="">Select League</option>' + 
                        leagues.map(league => {
                            const name = league.title || league.name;
                            const key = league.key || league.id;
                            return `<option value="${key}">${name}</option>`;
                        }).join('');
                } catch (error) {
                    leagueSelect.innerHTML = '<option value="">Error loading leagues</option>';
                }
            });
        }

        async function searchFutures() {
            const sport = document.getElementById('futures-sport').value;
            const league = document.getElementById('futures-league').value;

            if (!league) {
                alert('Please select league');
                return;
            }

            const container = document.getElementById('futures-container');
            container.innerHTML = '<div class="loading">Loading futures...</div>';

            try {
                const data = await fetchAPI(`/api/v3/futures?league=${league}`);
                advancedState.futuresData = extractData(data);
                renderFutures();
            } catch (error) {
                container.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            }
        }

        function renderFutures() {
            const container = document.getElementById('futures-container');
            if (!advancedState.futuresData.length) {
                container.innerHTML = '<div class="empty">No futures found</div>';
                return;
            }

            container.innerHTML = advancedState.futuresData.map(future => {
                const title = future.title || 'Future';
                return `
                    <div class="future-card">
                        <div class="future-title">${title}</div>
                        <!-- Add odds if available -->
                    </div>
                `;
            }).join('');
        }

        // === PARLAY ===
        function loadParlaySection() {
            renderParlaySelections();
        }

        function renderParlaySelections() {
            const container = document.getElementById('parlay-selections');
            if (!advancedState.parlaySelections.length) {
                container.innerHTML = '<div class="empty">No selections</div>';
                document.getElementById('parlay-calculator-section').style.display = 'none';
                return;
            }

            container.innerHTML = advancedState.parlaySelections.map((sel, idx) => `
                <div class="selection-item">
                    <div>${sel.name} @ ${sel.price}</div>
                    <button class="btn-danger" onclick="removeFromParlay(${idx})">Remove</button>
                </div>
            `).join('');
            document.getElementById('parlay-calculator-section').style.display = 'block';
        }

        function addToParlay(name, price) {
            advancedState.parlaySelections.push({name, price});
            if (advancedState.currentSection === 'parlay') renderParlaySelections();
        }

        function removeFromParlay(idx) {
            advancedState.parlaySelections.splice(idx, 1);
            renderParlaySelections();
        }

        function clearParlay() {
            advancedState.parlaySelections = [];
            advancedState.selectedParlaySportsbooks = [];
            renderParlaySelections();
        }

        function toggleParlaySportsbook(sportsbook) {
            const index = advancedState.selectedParlaySportsbooks.indexOf(sportsbook);
            if (index === -1) {
                advancedState.selectedParlaySportsbooks.push(sportsbook);
            } else {
                advancedState.selectedParlaySportsbooks.splice(index, 1);
            }
            // Update UI if needed
        }

        async function calculateParlay() {
            if (!advancedState.selectedParlaySportsbooks.length) {
                alert('Select sportsbooks');
                return;
            }

            const container = document.getElementById('parlay-results-container');
            container.innerHTML = '<div class="loading">Calculating...</div>';

            try {
                const payload = {
                    sportsbooks: advancedState.selectedParlaySportsbooks,
                    entries: advancedState.parlaySelections.map(sel => ({ name: sel.name, price_american: sel.price }))
                };
                const data = await postAPI('/api/v3/parlay/odds', payload);
                renderParlayResults(data);
            } catch (error) {
                container.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            }
        }

        function renderParlayResults(data) {
            const container = document.getElementById('parlay-results-container');
            // Render logic here
            container.innerHTML = 'Results rendered'; // Placeholder
        }

        // === STREAM ===
        function populateStreamFilters() {
            const sportSelect = document.getElementById('stream-sport');
            sportSelect.innerHTML = '<option value="">Select Sport</option>' + 
                advancedState.sports.map(sport => {
                    const name = sport.title || sport.name;
                    const key = sport.key || sport.id;
                    return `<option value="${key}">${name}</option>`;
                }).join('');
        }

        function startStream() {
            // Placeholder for stream
            alert('Stream started');
        }

        function stopStream() {
            // Placeholder
            alert('Stream stopped');
        }

        // === MARKET TYPES ===
        async function loadMarketTypes() {
            const container = document.getElementById('market-types-container');
            container.innerHTML = '<div class="loading">Loading market types...</div>';

            try {
                const data = await fetchAPI('/api/v3/market-types');
                const marketTypes = extractData(data);
                renderMarketTypes(marketTypes);
            } catch (error) {
                container.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            }
        }

        function renderMarketTypes(marketTypes) {
            const container = document.getElementById('market-types-container');
            if (!marketTypes.length) {
                container.innerHTML = '<div class="empty">No market types found</div>';
                return;
            }

            let tableHtml = '<table style="width: 100%; border-collapse: collapse;">';
            tableHtml += '<thead><tr>';
            const keys = Object.keys(marketTypes[0]);
            keys.forEach(key => {
                tableHtml += `<th style="border: 1px solid #ddd; padding: 8px; background: #f2f2f2;">${key}</th>`;
            });
            tableHtml += '</tr></thead><tbody>';

            marketTypes.forEach(item => {
                tableHtml += '<tr>';
                keys.forEach(key => {
                    tableHtml += `<td style="border: 1px solid #ddd; padding: 8px;">${item[key] || 'N/A'}</td>`;
                });
                tableHtml += '</tr>';
            });

            tableHtml += '</tbody></table>';
            container.innerHTML = tableHtml;
        }

        // Init
        init();
    </script>
</body>
</html>
```